#include <fstream>
#include <map>
#include <string>

int main(int argc, char **argv) {
  if (argc != 2) {
    fprintf(stderr, "You must include a filename to translate.\n");
    exit(1);
  }
  std::ifstream file_in;
  std::ofstream file_out;
  char c;
  std::string morse;
  std::map<char,std::string> morse_map = {{'A',	".- "},{'B',	"-... "},{'C',	"-.-. "},{'D',	"-.. "},{'E',	". "},{'F',	"..-. "},{'G',	"--. "},{'H',	".... "},{'I',	".. "},{'J',	".--- "},{'K',	"-.- "},{'L',	".-.. "},{'M',	"-- "},{'N',	"-. "},{'O',	"--- "},{'P',	".--. "},{'Q',	"--.- "},{'R',	".-. "},{'S',	"... "},{'T',	"- "},{'U',	"..- "},{'V',	"...- "},{'W',	".-- "},{'X',	"-..- "},{'Y',	"-.-- "},{'Z',	"--.. "},{'a',	".- "},{'b',	"-... "},{'c',	"-.-. "},{'d',	"-.. "},{'e',	". "},{'f',	"..-. "},{'g',	"--. "},{'h',	".... "},{'i',	".. "},{'j',	".--- "},{'k',	"-.- "},{'l',	".-.. "},{'m',	"-- "},{'n',	"-. "},{'o',	"--- "},{'p',	".--. "},{'q',	"--.- "},{'r',	".-. "},{'s',	"... "},{'t',	"- "},{'u',	"..- "},{'v',	"...- "},{'w',	".-- "},{'x',	"-..- "},{'y',	"-.-- "},{'z',	"--.. "},{'0',	"----- "},{'1',	".---- "},{'2',	"..--- "},{'3',	"...-- "},{'4',	"....- "},{'5',	"..... "},{'6',	"-.... "},{'7',	"--... "},{'8',	"---.. "},{'9',	"----. "},{'.',	".-.-.- "},{',',	"--..-- "},{':',	"---... "},{'?',	"..--.. "},{'\'',	".----. "},{'-',	"-....- "},{'/',	"-..-. "},{'(', "-.--.- "},{')',	"-.--.- "},{'\"',	".-..-. "},{'@',	".--.-. "},{'=',	"-...- "}};

  file_in.open(argv[1]);
  file_out.open("morse.txt", std::ofstream::out | std::ofstream::trunc);

  while (file_in.good()) {
    c = file_in.get();
    morse = morse_map[c];
    if (morse.length() > 0) {
      file_out << morse_map[c];
    }
    else {
      file_out << c;
    }
  }

  file_in.close();
  file_out.close();

  return 0;
}
